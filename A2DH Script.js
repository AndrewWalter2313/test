// ==UserScript==
// @namespace zyxubing
// @name A2DH
// @version 0.0.87
// @downloadURL https://gitee.com/zyxubing/codes/heq3slzy8dm1b7iprwvj633/raw?blob_name=A2DH
// @include https://*.bilibili.com/*
// @include https://*.zhihu.com/*
// @include https://acg.rip/*
// @include https://cloud.189.cn/*
// @include https://ecchi.iwara.tv/videos/*
// @include https://konachan.com/post*
// @include https://konachan.net/post*
// @include https://liuli.buzz/*
// @include https://morian.icu/*
// @include https://music.163.com/*
// @include https://nyaa.fun/*
// @include https://nyaa.net/*
// @include https://nyaa.si/*
// @include https://pan.baidu.com/*
// @include https://piratebay.live/*
// @include https://share.acgnx.se/*
// @include https://sukebei.nyaa.net/*
// @include https://sukebei.nyaa.si/*
// @include https://wallhaven.cc/*
// @include https://www.dlsite.com/home/*
// @include https://www.pianku.tv/*
// @include https://www.youtube.com/*
// @connect baidu.com
// @connect baidupcs.com
// @connect bilibili.com
// @connect 8.210.6.30
// @connect 212.64.37.212
// @connect 127.0.0.1
// @connect localhost
// @connect self
// @require https://cdn.staticfile.org/qrcode-generator/1.0.0/qrcode.min.js
// @grant GM_cookie
// @grant GM_download
// @grant GM_deleteValue
// @grant GM_getValue
// @grant GM_setValue
// @grant GM_setClipboard
// @grant GM_openInTab
// @grant GM_xmlhttpRequest
// @grant unsafeWindow
// @run-at document-idle
// ==/UserScript==
!function(){const ipod={},u={aria2(e,t){let o=[],n=["all-proxy","allow-overwrite","bt-exclude-tracker","max-upload-limit","dir","header","lowest-speed-limit","max-connection-per-server","min-split-size","out","split","use-header"],i={id:u.uid(),method:"system.multicall",params:[]};e.forEach(e=>{let t={},r={methodName:"aria2.addUri",params:[]};Object.keys(e).forEach(o=>{n.includes(o)&&(t[o]=e[o])}),t.split||(t.split=""+e.url.length);e.extype&&(t.out=i.id+e.extype),ipod.aria2&&ipod.aria2.token&&r.params.push("token:"+ipod.aria2.token);r.params.push(e.url),r.params.push(t);o.push(r)}),i.params.push(o);GM_xmlhttpRequest({url:t,method:"POST",responseType:"json",data:JSON.stringify(i),onerror(e){console.log("error",e.finalUrl),alert("Aria2\u8fde\u63a5\u5931\u8d25 \u8bf7\u68c0\u6d4bAria2\u662f\u5426\u8fd0\u884c\u548c\u586b\u5199\u7684jsonrpc\u662f\u5426\u6b63\u786e")},onload(e){console.log(e.response)}})},aria2clear(e){let t={id:u.uid(),method:"aria2.purgeDownloadResult"};GM_xmlhttpRequest({url:e,method:"POST",responseType:"json",data:JSON.stringify(t),onerror(e){console.log("error",e.finalUrl)},onload(e){console.log(e.response)}})},aria2config(e){let t={id:u.uid(),method:"aria2.changeGlobalOption",params:[{"allow-overwrite":"false","auto-file-renaming":"false","max-concurrent-downloads":"1"}]};GM_xmlhttpRequest({url:e,method:"POST",responseType:"json",data:JSON.stringify(t),onerror(e){console.log("error",e.finalUrl)},onload(e){console.log(e.response)}})},now:()=>Math.ceil(Date.now()/1e3),uid:()=>Date.now().toString(36).toUpperCase(),uuid(e,t){function o(e,t){let o,n="";if(t>e.length)for(o=0;t-e.length>o;o++)n+="0";return n+e}let n=""+Date.now()%1e5,i=e.map(e=>(e=>{let t,n="";for(t=0;e>t;t++)n+=u.rand(16).toString(16).toUpperCase();return o(n,e)})(e)).join("-");return i+=o(n,5),void 0==t||(i+=t),i},rand:e=>Math.floor(Math.random()*e),vobj:e=>"[object Object]"==Object.prototype.toString.call(e),vstr:e=>"[object String]"==Object.prototype.toString.call(e),zdom(e=0){let t=window.event;return t.preventDefault(),t.stopPropagation(),e?t.target:t.currentTarget},zform(e,t){document.querySelectorAll(e).forEach(e=>{let o=e.getAttribute("name");if(t.hasOwnProperty(o))switch(e.getAttribute("type")){case"radio":t[o].includes(e.value)&&(e.checked=!0);break;case"checkbox":t[o]&&(e.checked=!0);break;default:e.value=t[o]}})},load(e){let t,o=(e?e+".":"")+u.zhost();return(t=GM_getValue(o))?JSON.parse(t):null},save(e,t){let o=(e?e+".":"")+u.zhost();GM_setValue(o,JSON.stringify(t))},serialize(e,t){let o=[];switch(Object.prototype.toString.call(e)){case"[object Array]":case"[object Object]":return Object.keys(e).forEach(n=>{o.push(u.serialize(e[n],t?t+"["+n+"]":n))}),0==o.length?"":o.join("&");default:return t+"="+encodeURIComponent(""+e)}},strcut(e,t,o){let n,i,r="";if(e&&e.includes(t)){n=e.indexOf(t)+t.length,-1==(i=e.indexOf(o,n))&&(i=e.length);r=e.substring(n,i)}return r},str2obj(e){let t=null;return"[object String]"==Object.prototype.toString.call(e)&&e.length&&(t=e.includes('"')?JSON.parse(e):JSON.parse(e.replace(/'/g,'"'))),t},sprintf(e){let t,o,n="string"==typeof e?e:"";if(n.length)for(t=arguments.length-1;t>0;t--)o=RegExp("%"+t,"ig"),n=n.replace(o,arguments[t]);return n},download(e){if(e){let t=e.startsWith("magnet:")?{url:[]}:{url:[],"use-header":"true",header:["User-Agent: Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:77.0) Gecko/20100101 Firefox/77.0"],"min-split-size":"1M",split:"8"};Object.assign(t,ipod.aria2),e=e.startsWith("magnet:")?u.magnet(e):e.startsWith("http")?e:e.startsWith("//")?location.protocol+e:e.startsWith("/")?location.origin+e:location.origin+"/"+e;t.url.push(e),u.aria2([t],ipod.aria2.jsonrpc)}},magnet(e){let t=e.indexOf("&");return-1==t?e:e.substring(0,t)},history(e){const t=history[e];return function(){let o=new Event(e);return o.arguments=arguments,window.dispatchEvent(o),t.apply(this,arguments)}},urlfix:e=>e.startsWith("http")?e:e.startsWith("//")?location.protocol+e:e.startsWith("/")?location.origin+e:location.origin+"/"+e,namefix(e){let t,o=['"',"*","//","\\",":","<",">","?","|"];for(t=0;o.length>t;t++)e=e.replace(o[t],"");return e},tpl(e,t){let o=e.replace(/\s+/g," ").replace(/\[/g,"\tjstpl").replace(/\]/g,"\t").split("\t");return(Array.isArray(t)?t:[t]).map((e,t)=>(e.idx=t+1,u.compiler(o,e))).join("")},compiler:(e,t)=>e.map(e=>{if(e.startsWith("jstpl")){let o=e.substring(5);e=t.hasOwnProperty(o)?t[o]:"["+o+"]"}return e}).join(""),zhost(){let e=location.host.split(".");while(e.length>2)e.shift();return e.join(".")},zget:(e,t)=>("[object Object]"==Object.prototype.toString.call(t)||(t={}),new Promise((o,n)=>{GM_xmlhttpRequest({method:"GET",responseType:"json",url:e,headers:t,onerror(){n(r.response)},onload(e){o(e.response)}})})),zpost:(e,t,o)=>("[object Object]"==Object.prototype.toString.call(o)||(o={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}),new Promise((n,i)=>{GM_xmlhttpRequest({method:"POST",responseType:"json",url:t,data:e,headers:o,onerror(){i(r.response)},onload(e){n(e.response)}})})),zget2:(e,t)=>("[object Object]"==Object.prototype.toString.call(t)||(t={}),new Promise((o,n)=>{GM_xmlhttpRequest({method:"GET",responseType:"json",url:e,headers:t,anonymous:1,onerror(){n(r.response)},onload(e){o(e.response)}})})),zpost2:(e,t,o)=>("[object Object]"==Object.prototype.toString.call(o)||(o={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}),new Promise((n,i)=>{GM_xmlhttpRequest({method:"POST",responseType:"json",url:t,data:e,headers:o,anonymous:1,onerror(){i(r.response)},onload(e){n(e.response)}})})),usp(e){let t={},o=new URLSearchParams(e.startsWith("?")?e.substring(1):e);for([k,v]of o.entries())t[k]=v;return t},md5(e,t,o){function n(e,t){let o=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(o>>16)<<16|65535&o}function i(e,t,o,i,r,a){return n((e=>e<<r|e>>>32-r)(n(n(t,e),n(i,a))),o)}function r(e,t,o,n,r,a,l){return i(t&o|~t&n,e,t,r,a,l)}function a(e,t,o,n,r,a,l){return i(t&n|o&~n,e,t,r,a,l)}function l(e,t,o,n,r,a,l){return i(t^o^n,e,t,r,a,l)}function c(e,t,o,n,r,a,l){return i(o^(t|~n),e,t,r,a,l)}function s(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let o,i,s,d,f,b=1732584193,p=-271733879,m=-1732584194,h=271733878;for(o=0;e.length>o;o+=16){i=b,s=p;d=m,f=h;p=c(p=c(p=c(p=c(p=l(p=l(p=l(p=l(p=a(p=a(p=a(p=a(p=r(p=r(p=r(p=r(p,m=r(m,h=r(h,b=r(b,p,m,h,e[o],7,-680876936),p,m,e[o+1],12,-389564586),b,p,e[o+2],17,606105819),h,b,e[o+3],22,-1044525330),m=r(m,h=r(h,b=r(b,p,m,h,e[o+4],7,-176418897),p,m,e[o+5],12,1200080426),b,p,e[o+6],17,-1473231341),h,b,e[o+7],22,-45705983),m=r(m,h=r(h,b=r(b,p,m,h,e[o+8],7,1770035416),p,m,e[o+9],12,-1958414417),b,p,e[o+10],17,-42063),h,b,e[o+11],22,-1990404162),m=r(m,h=r(h,b=r(b,p,m,h,e[o+12],7,1804603682),p,m,e[o+13],12,-40341101),b,p,e[o+14],17,-1502002290),h,b,e[o+15],22,1236535329),m=a(m,h=a(h,b=a(b,p,m,h,e[o+1],5,-165796510),p,m,e[o+6],9,-1069501632),b,p,e[o+11],14,643717713),h,b,e[o],20,-373897302),m=a(m,h=a(h,b=a(b,p,m,h,e[o+5],5,-701558691),p,m,e[o+10],9,38016083),b,p,e[o+15],14,-660478335),h,b,e[o+4],20,-405537848),m=a(m,h=a(h,b=a(b,p,m,h,e[o+9],5,568446438),p,m,e[o+14],9,-1019803690),b,p,e[o+3],14,-187363961),h,b,e[o+8],20,1163531501),m=a(m,h=a(h,b=a(b,p,m,h,e[o+13],5,-1444681467),p,m,e[o+2],9,-51403784),b,p,e[o+7],14,1735328473),h,b,e[o+12],20,-1926607734),m=l(m,h=l(h,b=l(b,p,m,h,e[o+5],4,-378558),p,m,e[o+8],11,-2022574463),b,p,e[o+11],16,1839030562),h,b,e[o+14],23,-35309556),m=l(m,h=l(h,b=l(b,p,m,h,e[o+1],4,-1530992060),p,m,e[o+4],11,1272893353),b,p,e[o+7],16,-155497632),h,b,e[o+10],23,-1094730640),m=l(m,h=l(h,b=l(b,p,m,h,e[o+13],4,681279174),p,m,e[o],11,-358537222),b,p,e[o+3],16,-722521979),h,b,e[o+6],23,76029189),m=l(m,h=l(h,b=l(b,p,m,h,e[o+9],4,-640364487),p,m,e[o+12],11,-421815835),b,p,e[o+15],16,530742520),h,b,e[o+2],23,-995338651),m=c(m,h=c(h,b=c(b,p,m,h,e[o],6,-198630844),p,m,e[o+7],10,1126891415),b,p,e[o+14],15,-1416354905),h,b,e[o+5],21,-57434055),m=c(m,h=c(h,b=c(b,p,m,h,e[o+12],6,1700485571),p,m,e[o+3],10,-1894986606),b,p,e[o+10],15,-1051523),h,b,e[o+1],21,-2054922799),m=c(m,h=c(h,b=c(b,p,m,h,e[o+8],6,1873313359),p,m,e[o+15],10,-30611744),b,p,e[o+6],15,-1560198380),h,b,e[o+13],21,1309151649),m=c(m,h=c(h,b=c(b,p,m,h,e[o+4],6,-145523070),p,m,e[o+11],10,-1120210379),b,p,e[o+2],15,718787259),h,b,e[o+9],21,-343485551),b=n(b,i);p=n(p,s),m=n(m,d);h=n(h,f)}return[b,p,m,h]}function d(e){let t,o="",n=32*e.length;for(t=0;n>t;t+=8)o+=String.fromCharCode(e[t>>5]>>>t%32&255);return o}function f(e){let t,o=[];for(o[(e.length>>2)-1]=void 0,t=0;o.length>t;t+=1)o[t]=0;let n=8*e.length;for(t=0;n>t;t+=8)o[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return o}function b(e){let t,o,n="";for(o=0;e.length>o;o+=1)t=e.charCodeAt(o),n+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return n}function p(e){return unescape(encodeURIComponent(e))}function m(e){return(e=>d(s(f(e),8*e.length)))(p(e))}function h(e,t){return((e,t)=>{let o,n,i=f(e),r=[],a=[];for(r[15]=a[15]=void 0,i.length>16&&(i=s(i,8*e.length)),o=0;16>o;o+=1)r[o]=909522486^i[o],a[o]=1549556828^i[o];return n=s(r.concat(f(t)),512+8*t.length),d(s(a.concat(n),640))})(p(e),p(t))}return t?o?h(t,e):b(h(t,e)):o?m(e):(e=>b(m(e)))(e)}};async function e(e){if(0==ipod.task){ipod.list=[],ipod.task=setInterval(()=>{if(ipod.len==ipod.list.length){clearInterval(ipod.task),ipod.task=0;"video"==ipod.type&&ipod.aria2.cover&&c(1==ipod.count&&1==ipod.len?0:1),u.aria2(ipod.list,ipod.aria2.jsonrpc);ipod.adom&&ipod.adom.removeAttribute("style")}},1e3);let t="https://api.bilibili.com/x/player/pagelist?bvid="+e,o=await fetch(t).then(e=>e.json()).then(e=>0==e.code?e.data[0].cid:0);if(0==o)clearInterval(ipod.task),ipod.task=0;else{t=u.sprintf("https://api.bilibili.com/x/web-interface/view?bvid=%1&cid=%2",e,o);let n=await fetch(t).then(e=>e.json()).then(e=>{let t=[];if(0==e.code){t=e.data.pages,ipod.type="video";ipod.url="http://212.64.37.212/baiduyun/bvurl.php?bvid=%1&cid=%2",ipod.bid=e.data.bvid;ipod.title=e.data.title,ipod.cover=e.data.pic}return t});ipod.count=ipod.len=n.length,d(n)}}}function t(e){let t,o,n;return t=/=([a-zA-Z0-9\$]+?)\(decodeURIComponent/.exec(e),o=(t=RegExp(t[1]+"=function\\((.+?)\\){(.+?)}").exec(e))[1],t=/;(.+?)\..+?\(/.exec(n=t[2]),t=RegExp("var "+t[1]+"={[\\s\\S]+?};").exec(e),Function(o,(n=t[0]+"\n"+n).replace("var","let"))}function o(){ipod.task=setInterval(()=>{if(document.querySelector("#czyset")){clearInterval(ipod.task),ipod.task=0;setTimeout(()=>{let e;(e=document.querySelector("#session-bar"))&&e.remove(),(e=document.querySelector("#bangumi-box"))&&e.remove();(e=document.querySelector("div.footer"))&&e.remove(),document.querySelectorAll("i.fa-download").forEach(e=>{e.addEventListener("click",()=>{let e=u.zdom(),t={"allow-overwrite":"true","bt-exclude-tracker":"*","max-upload-limit":"64k",split:"1",dir:ipod.aria2.dir,url:[]};t.url.push(u.urlfix(e.parentElement.getAttribute("href"))),u.aria2([t],ipod.aria2.jsonrpc)})})},2e3)}else document.querySelector("ul.nav.navbar-nav").insertAdjacentHTML("afterbegin",'<li><a id="czyset">Aria2</a></li>'),document.querySelector("#czyset").addEventListener("click",()=>{u.zdom(),y()},!1)},1e3)}function n(){let e=setInterval(()=>{let t=document.querySelector("input.bui-switch-input");t&&(clearInterval(e),ipod.aria2.danmaku&&t.checked&&t.click())},2e3)}function i(){if(window.event.altKey){console.clear(),ipod.adom=u.zdom(1);while("li"!=ipod.adom.tagName.toLowerCase())ipod.adom=ipod.adom.parentElement;ipod.adom.setAttribute("style","visibility: hidden");let t=ipod.adom.querySelector("a").pathname;e(t.substring(t.lastIndexOf("/")+1))}}function a(){ipod.task=setInterval(()=>{if(document.querySelector("ul.video-list")){clearInterval(ipod.task),ipod.task=0;document.querySelector("ul.video-list").addEventListener("click",i,!1),document.querySelectorAll("ul.video-list a.up-name").forEach(e=>{let t,o=e.getAttribute("href");t="https://api.bilibili.com/x/web-interface/card?mid="+u.strcut(o,".com/","?"),fetch(t,{method:"GET",mode:"cors",credentials:"include"}).then(e=>e.json()).then(t=>{0==t.code&&e.insertAdjacentHTML("afterbegin",'<span style="color: #f39">'+t.data.follower+"</span> ")})})}},1e3)}function l(){location.pathname.endsWith("/favlist")&&(ipod.task=setInterval(()=>{if(document.querySelector("ul.fav-video-list")&&(clearInterval(ipod.task),ipod.task=0,!document.querySelector("#zydl"))){document.querySelector("div.fav-options").insertAdjacentHTML("beforeend",'<div class="meta" id="zydl" style="display: block"><i class="ion-download"></i> \u5168\u90e8\u4e0b\u8f7d</div><div class="meta" id="czyset">Aria2</div>'),document.querySelector("#zydl").addEventListener("click",s);document.querySelector("#czyset").addEventListener("click",y),document.querySelector("ul.fav-video-list").addEventListener("click",i)}},1e3)),location.pathname.endsWith("/video")&&(ipod.task=setInterval(()=>{if(document.querySelector("ul.cube-list")&&(clearInterval(ipod.task),ipod.task=0,!document.querySelector("#zydl"))){document.querySelector("ul.be-tab-inner").insertAdjacentHTML("beforeend",'<li id="czyset" class="be-tab-item">Aria2</li><li id="zydl" class="be-tab-item"><i class="ion-download"></i> \u5168\u90e8\u4e0b\u8f7d</li>'),document.querySelector("#zydl").addEventListener("click",s);document.querySelector("#czyset").addEventListener("click",y),document.querySelector("ul.cube-list").addEventListener("click",i)}},1e3))}function c(e){ipod.len++;let t={folder:e?ipod.bid:"",file:ipod.bid+".jpg",dir:ipod.aria2.video,url:[ipod.cover]};t.out=t.folder?t.folder+"/"+t.file:t.file,ipod.list.push(t)}function s(){console.clear();let t=0,o=document.querySelector("#zydl>i"),n=document.querySelector("ul.cube-list")?document.querySelectorAll("ul.cube-list>li"):document.querySelector("ul.fav-video-list")?document.querySelectorAll("ul.fav-video-list>li"):[],i=n.length,r=setInterval(()=>{t==i?(clearInterval(r),o.setAttribute("class","ion-download")):0==ipod.task&&(e(n[t].getAttribute("data-aid")),t++)},2e3);o.setAttribute("class","ion-refresh spinner")}function d(e){e.forEach(e=>{GM_xmlhttpRequest({method:"POST",responseType:"json",url:u.sprintf(ipod.url,ipod.bid,e.cid),data:ipod.buinfo?ipod.cookie:null,onload(t){let o=t.response;if(0==o.code){let t=o.data.durl,n=t.length;ipod.len+=n-1,t.forEach(t=>{let o={"use-header":"true",header:ipod.header,"lowest-speed-limit":"100k",split:"16",dir:ipod.aria2.video,url:[]};Array.isArray(t.backup_url)&&(o.url=t.backup_url),o.url.push(t.url);o.folder=1==ipod.count&&1==n?"":ipod.bid,o.file=1==ipod.count?1==n?ipod.bid+".flv":m(t.order)+".flv":1==n?m(e.page)+".flv":m(e.page)+" "+m(t.order)+".flv";o.out=o.folder?o.folder+"/"+o.file:o.file,ipod.list.push(o)})}else ipod.len--}})})}function f(e){e.forEach(e=>{GM_xmlhttpRequest({method:"POST",responseType:"json",url:u.sprintf(ipod.url,e.bvid,e.cid),data:ipod.buinfo?ipod.cookie:null,onload(t){let o=t.response;if(0==o.code){let t=o.result.durl,n=t.length;ipod.len+=n-1,t.forEach(t=>{let o={"use-header":"true",header:ipod.header,"lowest-speed-limit":"100k",split:"16",dir:ipod.aria2.anime,url:[]};Array.isArray(t.backup_url)&&(o.url=t.backup_url),o.url.push(t.url);o.folder=1==ipod.count&&1==n?"":ipod.title,o.file=1==ipod.count?1==n?ipod.title+".flv":m(t.order)+".flv":1==n?m(e.title)+" "+e.longTitle+".flv":m(e.title)+" "+e.longTitle+" "+m(t.order)+".flv";o.out=o.folder?o.folder+"/"+o.file:o.file,o.out=u.namefix(o.out);ipod.list.push(o)})}else ipod.len--}})})}function b(){$("#zylist li").on("click",()=>{let e=u.zdom();$(e).toggleClass("on")}),$("#zylist button").on("click",()=>{switch(u.zdom().getAttribute("name")){case"cancel":clearInterval(ipod.task),ipod.task=0;document.querySelector("#zydl>i").removeAttribute("style"),$("#zylist").fadeOut();break;case"all":$("#zylist li").each((e,t)=>{$(t).addClass("on")});break;case"invert":$("#zylist li").each((e,t)=>{$(t).toggleClass("on")});break;default:let e=[],t=[],o=__INITIAL_STATE__;if($("#zylist li").each((t,o)=>{let n=$(o);n.hasClass("on")&&e.push(n.attr("name"))}),ipod.len=e.length,ipod.list=[],$("#zylist").fadeOut(),"video"==ipod.type){o.videoData.pages.forEach(o=>{e.includes(""+o.cid)&&t.push(o)}),console.log(t);d(t)}"anime"==ipod.type&&(o.epList.forEach(o=>{e.includes(""+o.cid)&&t.push(o)}),f(t))}})}function p(){let e,t=u.zdom();if(0==ipod.task){if(e=__INITIAL_STATE__,document.querySelector("#zydl>i").setAttribute("style","color: #fb7299"),ipod.list=[],ipod.task=setInterval(()=>{if(ipod.len==ipod.list.length){clearInterval(ipod.task),ipod.task=0;document.querySelector("#zydl>i").removeAttribute("style"),"video"==ipod.type&&ipod.aria2.cover&&c(1==ipod.count&&1==ipod.len?0:1);u.aria2(ipod.list,ipod.aria2.jsonrpc)}},1e3),e.videoData)if(ipod.type="video",ipod.url="http://212.64.37.212/baiduyun/bvurl.php?bvid=%1&cid=%2",ipod.aid=e.videoData.aid,ipod.bid=e.videoData.bvid,ipod.title=e.videoData.title,ipod.cover=e.videoData.pic,ipod.count=ipod.len=e.videoData.pages.length,1==ipod.count)d(e.videoData.pages);else{let o='<div><div class="btn-group full"><button name="cancel"> \u53d6\u6d88 </button><button name="all"> \u5168\u9009 </button><button name="invert"> \u53cd\u9009 </button><button name="download"><i class="ion-download"></i> \u4e0b\u8f7d </button></div><ul>';if(t=document.querySelector("#zylist"))t.setAttribute("style","display: flex");else{t=document.createElement("div"),document.body.insertAdjacentElement("beforeend",t);t.setAttribute("class","tamper"),t.setAttribute("id","zylist")}e.videoData.pages.forEach(e=>{o+=u.sprintf('<li name="%1">%2</li>',e.cid,m(e.page)+" "+e.part)}),t.innerHTML=o+"</ul></div>";b()}if(e.mediaInfo)if(ipod.type="anime",ipod.url="http://212.64.37.212/baiduyun/bvurl.php?anime=1&bvid=%1&cid=%2",ipod.title=e.mediaInfo.title,ipod.cover=e.mediaInfo.cover,ipod.count=ipod.len=e.epList.length,1==ipod.count)f(e.epList);else{let o='<div><div class="btn-group full"><button name="cancel"> \u53d6\u6d88 </button><button name="all"> \u5168\u9009 </button><button name="invert"> \u53cd\u9009 </button><button name="download"><i class="ion-download"></i> \u4e0b\u8f7d </button></div><ul>';if(t=document.querySelector("#zylist"))t.setAttribute("style","display: flex");else{t=document.createElement("div"),document.body.insertAdjacentElement("beforeend",t);t.setAttribute("class","tamper"),t.setAttribute("id","zylist")}e.epList.forEach(e=>{o+=u.sprintf('<li name="%1">%2</li>',e.cid,m(e.title)+" "+e.longTitle)}),t.innerHTML=o+"</ul></div>";b()}}}function m(e){let t,o=+e;return(t=isNaN(o)?"0":""+o).padStart(3,"0")}function h(){document.head.insertAdjacentHTML("beforeend",'<style type="text/css">@font-face{font-family:"Ionicons";src:url("https://cdn.bootcss.com/ionicons/4.5.6/fonts/ionicons.eot?v=4.5.5#iefix") format("embedded-opentype"),url("https://cdn.bootcss.com/ionicons/4.5.6/fonts/ionicons.woff2?v=4.5.5") format("woff2"),url("https://cdn.bootcss.com/ionicons/4.5.6/fonts/ionicons.woff?v=4.5.5") format("woff"),url("https://cdn.bootcss.com/ionicons/4.5.6/fonts/ionicons.ttf?v=4.5.5") format("truetype"),url("https://cdn.bootcss.com/ionicons/4.5.6/fonts/ionicons.svg?v=4.5.5#Ionicons") format("svg");font-weight:normal;font-style:normal}i[class|=ion]{display:inline-block;font-family:"Ionicons";font-size:120%;font-style:normal;font-variant:normal;font-weight:normal;line-height:1;text-rendering:auto;text-transform:none;vertical-align:text-bottom;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}.ion-android:before{content:"\\f225"}.ion-angular:before{content:"\\f227"}.ion-apple:before{content:"\\f229"}.ion-bitbucket:before{content:"\\f193"}.ion-bitcoin:before{content:"\\f22b"}.ion-buffer:before{content:"\\f22d"}.ion-chrome:before{content:"\\f22f"}.ion-closed-captioning:before{content:"\\f105"}.ion-codepen:before{content:"\\f230"}.ion-css3:before{content:"\\f231"}.ion-designernews:before{content:"\\f232"}.ion-dribbble:before{content:"\\f233"}.ion-dropbox:before{content:"\\f234"}.ion-euro:before{content:"\\f235"}.ion-facebook:before{content:"\\f236"}.ion-flickr:before{content:"\\f107"}.ion-foursquare:before{content:"\\f237"}.ion-freebsd-devil:before{content:"\\f238"}.ion-game-controller-a:before{content:"\\f13b"}.ion-game-controller-b:before{content:"\\f181"}.ion-github:before{content:"\\f239"}.ion-google:before{content:"\\f23a"}.ion-googleplus:before{content:"\\f23b"}.ion-hackernews:before{content:"\\f23c"}.ion-html5:before{content:"\\f23d"}.ion-instagram:before{content:"\\f23e"}.ion-ionic:before{content:"\\f150"}.ion-ionitron:before{content:"\\f151"}.ion-javascript:before{content:"\\f23f"}.ion-linkedin:before{content:"\\f240"}.ion-markdown:before{content:"\\f241"}.ion-model-s:before{content:"\\f153"}.ion-no-smoking:before{content:"\\f109"}.ion-nodejs:before{content:"\\f242"}.ion-npm:before{content:"\\f195"}.ion-octocat:before{content:"\\f243"}.ion-pinterest:before{content:"\\f244"}.ion-playstation:before{content:"\\f245"}.ion-polymer:before{content:"\\f15e"}.ion-python:before{content:"\\f246"}.ion-reddit:before{content:"\\f247"}.ion-rss:before{content:"\\f248"}.ion-sass:before{content:"\\f249"}.ion-skype:before{content:"\\f24a"}.ion-slack:before{content:"\\f10b"}.ion-snapchat:before{content:"\\f24b"}.ion-steam:before{content:"\\f24c"}.ion-tumblr:before{content:"\\f24d"}.ion-tux:before{content:"\\f2ae"}.ion-twitch:before{content:"\\f2af"}.ion-twitter:before{content:"\\f2b0"}.ion-usd:before{content:"\\f2b1"}.ion-vimeo:before{content:"\\f2c4"}.ion-vk:before{content:"\\f10d"}.ion-whatsapp:before{content:"\\f2c5"}.ion-windows:before{content:"\\f32f"}.ion-wordpress:before{content:"\\f330"}.ion-xbox:before{content:"\\f34c"}.ion-xing:before{content:"\\f10f"}.ion-yahoo:before{content:"\\f34d"}.ion-yen:before{content:"\\f34e"}.ion-youtube:before{content:"\\f34f"}.ion-add:before{content:"\\f273"}.ion-add-circle:before{content:"\\f272"}.ion-add-circle-outline:before{content:"\\f158"}.ion-airplane:before{content:"\\f15a"}.ion-alarm:before{content:"\\f274"}.ion-albums:before{content:"\\f275"}.ion-alert:before{content:"\\f276"}.ion-american-football:before{content:"\\f277"}.ion-analytics:before{content:"\\f278"}.ion-aperture:before{content:"\\f279"}.ion-apps:before{content:"\\f27a"}.ion-appstore:before{content:"\\f27b"}.ion-archive:before{content:"\\f27c"}.ion-arrow-back:before{content:"\\f27d"}.ion-arrow-down:before{content:"\\f27e"}.ion-arrow-dropdown:before{content:"\\f280"}.ion-arrow-dropdown-circle:before{content:"\\f27f"}.ion-arrow-dropleft:before{content:"\\f282"}.ion-arrow-dropleft-circle:before{content:"\\f281"}.ion-arrow-dropright:before{content:"\\f284"}.ion-arrow-dropright-circle:before{content:"\\f283"}.ion-arrow-dropup:before{content:"\\f286"}.ion-arrow-dropup-circle:before{content:"\\f285"}.ion-arrow-forward:before{content:"\\f287"}.ion-arrow-round-back:before{content:"\\f288"}.ion-arrow-round-down:before{content:"\\f289"}.ion-arrow-round-forward:before{content:"\\f28a"}.ion-arrow-round-up:before{content:"\\f28b"}.ion-arrow-up:before{content:"\\f28c"}.ion-at:before{content:"\\f28d"}.ion-attach:before{content:"\\f28e"}.ion-backspace:before{content:"\\f28f"}.ion-barcode:before{content:"\\f290"}.ion-baseball:before{content:"\\f291"}.ion-basket:before{content:"\\f292"}.ion-basketball:before{content:"\\f293"}.ion-battery-charging:before{content:"\\f294"}.ion-battery-dead:before{content:"\\f295"}.ion-battery-full:before{content:"\\f296"}.ion-beaker:before{content:"\\f297"}.ion-bed:before{content:"\\f160"}.ion-beer:before{content:"\\f298"}.ion-bicycle:before{content:"\\f299"}.ion-bluetooth:before{content:"\\f29a"}.ion-boat:before{content:"\\f29b"}.ion-body:before{content:"\\f29c"}.ion-bonfire:before{content:"\\f29d"}.ion-book:before{content:"\\f29e"}.ion-bookmark:before{content:"\\f29f"}.ion-bookmarks:before{content:"\\f2a0"}.ion-bowtie:before{content:"\\f2a1"}.ion-briefcase:before{content:"\\f2a2"}.ion-browsers:before{content:"\\f2a3"}.ion-brush:before{content:"\\f2a4"}.ion-bug:before{content:"\\f2a5"}.ion-build:before{content:"\\f2a6"}.ion-bulb:before{content:"\\f2a7"}.ion-bus:before{content:"\\f2a8"}.ion-business:before{content:"\\f1a4"}.ion-cafe:before{content:"\\f2a9"}.ion-calculator:before{content:"\\f2aa"}.ion-calendar:before{content:"\\f2ab"}.ion-call:before{content:"\\f2ac"}.ion-camera:before{content:"\\f2ad"}.ion-car:before{content:"\\f2b2"}.ion-card:before{content:"\\f2b3"}.ion-cart:before{content:"\\f2b4"}.ion-cash:before{content:"\\f2b5"}.ion-cellular:before{content:"\\f164"}.ion-chatboxes:before{content:"\\f2b6"}.ion-chatbubbles:before{content:"\\f2b7"}.ion-checkbox:before{content:"\\f2b9"}.ion-checkbox-outline:before{content:"\\f2b8"}.ion-checkmark:before{content:"\\f2bc"}.ion-checkmark-circle:before{content:"\\f2bb"}.ion-checkmark-circle-outline:before{content:"\\f2ba"}.ion-clipboard:before{content:"\\f2bd"}.ion-clock:before{content:"\\f2be"}.ion-close:before{content:"\\f2c0"}.ion-close-circle:before{content:"\\f2bf"}.ion-close-circle-outline:before{content:"\\f166"}.ion-cloud:before{content:"\\f2c9"}.ion-cloud-circle:before{content:"\\f2c2"}.ion-cloud-done:before{content:"\\f2c3"}.ion-cloud-download:before{content:"\\f2c6"}.ion-cloud-outline:before{content:"\\f2c7"}.ion-cloud-upload:before{content:"\\f2c8"}.ion-cloudy:before{content:"\\f2cb"}.ion-cloudy-night:before{content:"\\f2ca"}.ion-code:before{content:"\\f2ce"}.ion-code-download:before{content:"\\f2cc"}.ion-code-working:before{content:"\\f2cd"}.ion-cog:before{content:"\\f2cf"}.ion-color-fill:before{content:"\\f2d0"}.ion-color-filter:before{content:"\\f2d1"}.ion-color-palette:before{content:"\\f2d2"}.ion-color-wand:before{content:"\\f2d3"}.ion-compass:before{content:"\\f2d4"}.ion-construct:before{content:"\\f2d5"}.ion-contact:before{content:"\\f2d6"}.ion-contacts:before{content:"\\f2d7"}.ion-contract:before{content:"\\f2d8"}.ion-contrast:before{content:"\\f2d9"}.ion-copy:before{content:"\\f2da"}.ion-create:before{content:"\\f2db"}.ion-crop:before{content:"\\f2dc"}.ion-cube:before{content:"\\f2dd"}.ion-cut:before{content:"\\f2de"}.ion-desktop:before{content:"\\f2df"}.ion-disc:before{content:"\\f2e0"}.ion-document:before{content:"\\f2e1"}.ion-done-all:before{content:"\\f2e2"}.ion-download:before{content:"\\f2e3"}.ion-easel:before{content:"\\f2e4"}.ion-egg:before{content:"\\f2e5"}.ion-exit:before{content:"\\f2e6"}.ion-expand:before{content:"\\f2e7"}.ion-eye:before{content:"\\f2e9"}.ion-eye-off:before{content:"\\f2e8"}.ion-fastforward:before{content:"\\f2ea"}.ion-female:before{content:"\\f2eb"}.ion-filing:before{content:"\\f2ec"}.ion-film:before{content:"\\f2ed"}.ion-finger-print:before{content:"\\f2ee"}.ion-fitness:before{content:"\\f1ac"}.ion-flag:before{content:"\\f2ef"}.ion-flame:before{content:"\\f2f0"}.ion-flash:before{content:"\\f17e"}.ion-flash-off:before{content:"\\f12f"}.ion-flashlight:before{content:"\\f16b"}.ion-flask:before{content:"\\f2f2"}.ion-flower:before{content:"\\f2f3"}.ion-folder:before{content:"\\f2f5"}.ion-folder-open:before{content:"\\f2f4"}.ion-football:before{content:"\\f2f6"}.ion-funnel:before{content:"\\f2f7"}.ion-gift:before{content:"\\f199"}.ion-git-branch:before{content:"\\f2fa"}.ion-git-commit:before{content:"\\f2fb"}.ion-git-compare:before{content:"\\f2fc"}.ion-git-merge:before{content:"\\f2fd"}.ion-git-network:before{content:"\\f2fe"}.ion-git-pull-request:before{content:"\\f2ff"}.ion-glasses:before{content:"\\f300"}.ion-globe:before{content:"\\f301"}.ion-grid:before{content:"\\f302"}.ion-hammer:before{content:"\\f303"}.ion-hand:before{content:"\\f304"}.ion-happy:before{content:"\\f305"}.ion-headset:before{content:"\\f306"}.ion-heart:before{content:"\\f308"}.ion-heart-dislike:before{content:"\\f167"}.ion-heart-empty:before{content:"\\f1a1"}.ion-heart-half:before{content:"\\f1a2"}.ion-help:before{content:"\\f30b"}.ion-help-buoy:before{content:"\\f309"}.ion-help-circle:before{content:"\\f30a"}.ion-help-circle-outline:before{content:"\\f16d"}.ion-home:before{content:"\\f30c"}.ion-hourglass:before{content:"\\f111"}.ion-ice-cream:before{content:"\\f30d"}.ion-image:before{content:"\\f30e"}.ion-images:before{content:"\\f30f"}.ion-infinite:before{content:"\\f310"}.ion-information:before{content:"\\f312"}.ion-information-circle:before{content:"\\f311"}.ion-information-circle-outline:before{content:"\\f16f"}.ion-jet:before{content:"\\f315"}.ion-journal:before{content:"\\f18d"}.ion-key:before{content:"\\f316"}.ion-keypad:before{content:"\\f317"}.ion-laptop:before{content:"\\f318"}.ion-leaf:before{content:"\\f319"}.ion-link:before{content:"\\f22e"}.ion-list:before{content:"\\f31b"}.ion-list-box:before{content:"\\f31a"}.ion-locate:before{content:"\\f31c"}.ion-lock:before{content:"\\f31d"}.ion-log-in:before{content:"\\f31e"}.ion-log-out:before{content:"\\f31f"}.ion-magnet:before{content:"\\f320"}.ion-mail:before{content:"\\f322"}.ion-mail-open:before{content:"\\f321"}.ion-mail-unread:before{content:"\\f172"}.ion-male:before{content:"\\f323"}.ion-man:before{content:"\\f324"}.ion-map:before{content:"\\f325"}.ion-medal:before{content:"\\f326"}.ion-medical:before{content:"\\f327"}.ion-medkit:before{content:"\\f328"}.ion-megaphone:before{content:"\\f329"}.ion-menu:before{content:"\\f32a"}.ion-mic:before{content:"\\f32c"}.ion-mic-off:before{content:"\\f32b"}.ion-microphone:before{content:"\\f32d"}.ion-moon:before{content:"\\f32e"}.ion-more:before{content:"\\f1c9"}.ion-move:before{content:"\\f331"}.ion-musical-note:before{content:"\\f332"}.ion-musical-notes:before{content:"\\f333"}.ion-navigate:before{content:"\\f334"}.ion-notifications:before{content:"\\f338"}.ion-notifications-off:before{content:"\\f336"}.ion-notifications-outline:before{content:"\\f337"}.ion-nuclear:before{content:"\\f339"}.ion-nutrition:before{content:"\\f33a"}.ion-open:before{content:"\\f33b"}.ion-options:before{content:"\\f33c"}.ion-outlet:before{content:"\\f33d"}.ion-paper:before{content:"\\f33f"}.ion-paper-plane:before{content:"\\f33e"}.ion-partly-sunny:before{content:"\\f340"}.ion-pause:before{content:"\\f341"}.ion-paw:before{content:"\\f342"}.ion-people:before{content:"\\f343"}.ion-person:before{content:"\\f345"}.ion-person-add:before{content:"\\f344"}.ion-phone-landscape:before{content:"\\f346"}.ion-phone-portrait:before{content:"\\f347"}.ion-photos:before{content:"\\f348"}.ion-pie:before{content:"\\f349"}.ion-pin:before{content:"\\f34a"}.ion-pint:before{content:"\\f34b"}.ion-pizza:before{content:"\\f354"}.ion-planet:before{content:"\\f356"}.ion-play:before{content:"\\f357"}.ion-play-circle:before{content:"\\f174"}.ion-podium:before{content:"\\f358"}.ion-power:before{content:"\\f359"}.ion-pricetag:before{content:"\\f35a"}.ion-pricetags:before{content:"\\f35b"}.ion-print:before{content:"\\f35c"}.ion-pulse:before{content:"\\f35d"}.ion-qr-scanner:before{content:"\\f35e"}.ion-quote:before{content:"\\f35f"}.ion-radio:before{content:"\\f362"}.ion-radio-button-off:before{content:"\\f360"}.ion-radio-button-on:before{content:"\\f361"}.ion-rainy:before{content:"\\f363"}.ion-recording:before{content:"\\f364"}.ion-redo:before{content:"\\f365"}.ion-refresh:before{content:"\\f366"}.ion-refresh-circle:before{content:"\\f228"}.ion-remove:before{content:"\\f368"}.ion-remove-circle:before{content:"\\f367"}.ion-remove-circle-outline:before{content:"\\f176"}.ion-reorder:before{content:"\\f369"}.ion-repeat:before{content:"\\f36a"}.ion-resize:before{content:"\\f36b"}.ion-restaurant:before{content:"\\f36c"}.ion-return-left:before{content:"\\f36d"}.ion-return-right:before{content:"\\f36e"}.ion-reverse-camera:before{content:"\\f36f"}.ion-rewind:before{content:"\\f370"}.ion-ribbon:before{content:"\\f371"}.ion-rocket:before{content:"\\f179"}.ion-rose:before{content:"\\f372"}.ion-sad:before{content:"\\f373"}.ion-save:before{content:"\\f1a9"}.ion-school:before{content:"\\f374"}.ion-search:before{content:"\\f375"}.ion-send:before{content:"\\f376"}.ion-settings:before{content:"\\f377"}.ion-share:before{content:"\\f379"}.ion-share-alt:before{content:"\\f378"}.ion-shirt:before{content:"\\f37a"}.ion-shuffle:before{content:"\\f37b"}.ion-skip-backward:before{content:"\\f37c"}.ion-skip-forward:before{content:"\\f37d"}.ion-snow:before{content:"\\f37e"}.ion-speedometer:before{content:"\\f37f"}.ion-square:before{content:"\\f381"}.ion-square-outline:before{content:"\\f380"}.ion-star:before{content:"\\f384"}.ion-star-half:before{content:"\\f382"}.ion-star-outline:before{content:"\\f383"}.ion-stats:before{content:"\\f385"}.ion-stopwatch:before{content:"\\f386"}.ion-subway:before{content:"\\f387"}.ion-sunny:before{content:"\\f388"}.ion-swap:before{content:"\\f389"}.ion-switch:before{content:"\\f38a"}.ion-sync:before{content:"\\f38b"}.ion-tablet-landscape:before{content:"\\f38c"}.ion-tablet-portrait:before{content:"\\f38d"}.ion-tennisball:before{content:"\\f38e"}.ion-text:before{content:"\\f38f"}.ion-thermometer:before{content:"\\f390"}.ion-thumbs-down:before{content:"\\f391"}.ion-thumbs-up:before{content:"\\f392"}.ion-thunderstorm:before{content:"\\f393"}.ion-time:before{content:"\\f394"}.ion-timer:before{content:"\\f395"}.ion-today:before{content:"\\f17d"}.ion-train:before{content:"\\f396"}.ion-transgender:before{content:"\\f397"}.ion-trash:before{content:"\\f398"}.ion-trending-down:before{content:"\\f399"}.ion-trending-up:before{content:"\\f39a"}.ion-trophy:before{content:"\\f39b"}.ion-tv:before{content:"\\f17f"}.ion-umbrella:before{content:"\\f39c"}.ion-undo:before{content:"\\f39d"}.ion-unlock:before{content:"\\f39e"}.ion-videocam:before{content:"\\f39f"}.ion-volume-high:before{content:"\\f123"}.ion-volume-low:before{content:"\\f131"}.ion-volume-mute:before{content:"\\f3a1"}.ion-volume-off:before{content:"\\f3a2"}.ion-walk:before{content:"\\f3a4"}.ion-wallet:before{content:"\\f18f"}.ion-warning:before{content:"\\f3a5"}.ion-watch:before{content:"\\f3a6"}.ion-water:before{content:"\\f3a7"}.ion-wifi:before{content:"\\f3a8"}.ion-wine:before{content:"\\f3a9"}.ion-woman:before{content:"\\f3aa"}div.tamper{align-items:center;background-color:rgba(0,0,0,0.85);box-sizing:border-box;cursor:default;display:flex;font-size:14px !important;height:100%;justify-content:center;left:0;position:fixed;top:0;text-align:left;width:100%;z-index:900000}div.tamper>div{background-color:white;box-sizing:border-box;padding:1em;width:360px}div.tamper>div.doc{width:720px}div.tamper a,div.tamper h1,div.tamper h2,div.tamper h3,div.tamper h4,div.tamper h5,div.tamper h6{color:#333 !important}div.tamper h1{font-size:1.8rem;font-weight:400;margin:10px 0 20px 0;text-align:center}div.tamper form{display:block}div.tamper form>div{padding:.5em 0}div.tamper form>div>div{margin:.5em 0}div.tamper form>div>div:last-child{margin-bottom:0}div.tamper form label{color:#000;font-weight:normal;margin:0;vertical-align:middle}div.tamper form label:first-child{display:block;margin-bottom:.5em}div.tamper form label:first-child:before{content:"\\00bb";margin:0 .25em}div.tamper form label:not(:first-child){display:inline}div.tamper form input{box-shadow:none;color:#000}div.tamper form input[type=text]{background-color:#fff;border:1px solid #ddd;box-sizing:border-box;display:block;font-size:1em;padding:.5em;width:100%}div.tamper form input[type=text]:focus{border:1px solid #59c1f0}div.tamper form input[type=password]{background-color:#fff;border:1px solid #ddd;box-sizing:border-box;display:block;font-size:1em;padding:.5em;width:100%}div.tamper form input[type=password]:focus{border:1px solid #59c1f0}div.tamper form input[type=radio],div.tamper form input[type=checkbox]{display:inline-block !important;height:1em;margin-right:.25em;vertical-align:middle;width:1em}div.tamper form input[type=checkbox]{-webkit-appearance:checkbox !important}div.tamper form input[type=radio]{-webkit-appearance:radio !important}div.tamper ul{margin:.5em;padding:0;list-style-type:disc;list-style-position:inside;max-height:520px;overflow-y:auto;scrollbar-width:thin}div.tamper ul>li{box-sizing:content-box;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:.25em 0;cursor:default}div.tamper ul>li.on{color:#f45a8d}div.summary{color:#666}div.btn-group{box-sizing:border-box;display:inline-flex}div.btn-group.full{display:flex}div.btn-group.outline>button{background-color:#fff;border:1px solid #ccc;color:#000}div.btn-group.outline>button:hover{color:#ffffff;background-color:#000;border-color:#000}div.btn-group.outline>button:not(:first-child){border-left:none}div.btn-group>button{background-color:#666;border-radius:0;border:none;color:#fff;display:inline-block;flex:1 1 auto;margin:0;outline:none;padding:.5em 1.25em;position:relative;font-size:inherit}div.btn-group>button:hover{background-color:#000}div.btn-group>button:first-child{border-bottom-left-radius:.25rem;border-top-left-radius:.25rem}div.btn-group>button:last-child{border-bottom-right-radius:.25rem;border-top-right-radius:.25rem}.mt1{margin-top:10px}@keyframes spinner{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.spinner{animation-name:spinner;animation-duration:2400ms;animation-timing-function:linear;animation-iteration-count:infinite}body{cursor:default}</tyle>');let e,t=location.host.split(".");while(t.length>2)t.shift();switch(t.join(".")){case"baidu.com":e=location.pathname.includes("/s/")?'<style type="text/css">#bd-main>div.bd-aside{display:none !important}#bd-main>div.bd-left{margin:10px auto !important}#hd,#layoutHeader,#web-right-view,#layoutAside{display:none !important}#bd{width:960px;min-width:960px;margin:10px auto !important}#layoutApp>.frame-main{max-width:720px;margin-top:15px}#layoutApp>.frame-main>.frame-content{margin:0}div.frame-all{background-color:#444}div.x-button-box>a.g-button{display:none}div.x-button-box>a.g-button[data-button-id=b1]{display:inline-block}</style>':'<style type="text/css">dd[node-type~=header-apps]{margin-right:120px !important}</style>';break;case"bilibili.com":e='<style type="text/css">#videoList{display:flex;flex-wrap:wrap;list-style:none;margin-top:10px;width:100%}#videoList>li{border-radius:.25em;border:1px solid #ddd;cursor:default;display:inline-block;flex:initial initial auto;margin:4px 2px;padding:.5em 1.25em;text-align:center}#videoList>li:hover{background-color:#555;border-color:#555;color:#fff}</style>'}document.head.insertAdjacentHTML("beforeend",e)}function y(){if(document.querySelector("#zyset"))ipod.aria2&&u.zform("#zyset input",ipod.aria2),document.querySelector("#zyset").setAttribute("style","display: flex");else{let e;switch(u.zhost()){case"bilibili.com":e='<div class="tamper" id="zyset"><div><form><input name="version" type="hidden" value="1"><div><label>\u5e38\u89c4\u8bbe\u7f6e</label><div><input name="cover" type="checkbox" value="1"><label>\u4e0b\u8f7d\u89c6\u9891\u65f6\u540c\u65f6\u4e0b\u8f7d\u5c01\u9762\u56fe\u7247</label></div><div><input name="danmaku" type="checkbox" value="1"><label>\u64ad\u653e\u89c6\u9891\u65f6\u9ed8\u8ba4\u5173\u95ed\u5f39\u5e55</label></div><div><input name="coin" type="checkbox" value="1"><label>\u7ed9\u4f5c\u8005\u6295\u5e01 \u53ef\u5f00\u542f\u7f51\u76d8\u4e0b\u8f7d\u52a0\u901f</label></div><div class="summary"> \u5f53\u524d\u7f51\u76d8\u8d26\u53f7\uff1a <span id="bduid">none</span> &nbsp; <span id="bdbind">\u7ed1\u5b9a</span></div></div><div><label>\u8bbe\u7f6e aria2 jsonrpc</label><input name="jsonrpc" type="text"></div><div><label>\u8bbe\u7f6e aria2 \u8bbf\u95ee\u53e3\u4ee4</label><input name="token" type="password" placeholder="\u6ca1\u6709\u53e3\u4ee4\u5219\u4e0d\u8981\u586b\u5199"></div><div><label>\u8bbe\u7f6e\u89c6\u9891\u4e0b\u8f7d\u4fdd\u5b58\u8def\u5f84</label><input name="video" type="text"><div class="summary"> \u8bf7\u4f7f\u7528\u6b63\u659c\u6760\u4f5c\u4e3a\u5206\u9694\u7b26\uff0c\u5141\u8bb8\u4e2d\u6587\u5b57\u7b26\u3002 </div></div><div><label>\u8bbe\u7f6e\u756a\u5267\u4e0b\u8f7d\u4fdd\u5b58\u8def\u5f84</label><input name="anime" type="text"></div><div class="btn-group"><button type="submit"><i class="ion-checkmark"></i> \u786e\u5b9a </button><button type="button"><i class="ion-close"></i> \u53d6\u6d88 </button></div></form></div></div>';break;case"baidu.com":e='<div class="tamper" id="zyset"><div><form><input name="version" type="hidden" value="1"><div><label>\u8bbe\u7f6e aria2 jsonrpc</label><input name="jsonrpc" type="text"></div><div><label>\u8bbe\u7f6e aria2 \u8bbf\u95ee\u53e3\u4ee4</label><input name="token" type="password" placeholder="\u6ca1\u6709\u53e3\u4ee4\u5219\u4e0d\u8981\u586b\u5199"></div><div><label>\u8bbe\u7f6e\u4e0b\u8f7d\u4fdd\u5b58\u8def\u5f84</label><input name="dir" type="text"><div class="summary"> \u8bf7\u4f7f\u7528\u6b63\u659c\u6760\u4f5c\u4e3a\u5206\u9694\u7b26\uff0c\u8def\u5f84\u4e2d\u53ef\u4ee5\u6709\u4e2d\u6587 <br><span style="color:#f33">\u8bf7\u52a1\u5fc5\u9605\u8bfb\u8bf4\u660e\u6309\u94ae\u91cc\u7684\u76f8\u5173\u5185\u5bb9</span></div></div><div class="btn-group"><button type="submit"><i class="ion-checkmark"></i> \u786e\u5b9a</button><button type="button"><i class="ion-close"></i> \u53d6\u6d88</button></div></form></div></div>';break;case"youtube.com":e='<div class="tamper" id="zyset"><div><form><input name="version" type="hidden" value="1"><div><input name="mode" type="checkbox" value="1"><label>\u4f7f\u7528\u6d4f\u89c8\u5668\u76f4\u63a5\u4e0b\u8f7d\u800c\u975eAria2</label><div class="summary">\u4e0d\u77e5\u9053\u5982\u4f55\u8bbe\u7f6e\u4ee3\u7406\u670d\u52a1\u5668\u8bf7\u52fe\u9009\u6d4f\u89c8\u5668\u4e0b\u8f7d</div></div><div><label>\u8bbe\u7f6e aria2 jsonrpc</label><input name="jsonrpc" type="text"></div><div><label>\u8bbe\u7f6e aria2 \u8bbf\u95ee\u53e3\u4ee4</label><input name="token" type="password" placeholder="\u6ca1\u6709\u53e3\u4ee4\u5219\u4e0d\u8981\u586b\u5199"></div><div><label>\u8bbe\u7f6e\u4ee3\u7406\u670d\u52a1\u5668</label><input name="proxy" type="text"></div><div><label>\u8bbe\u7f6e\u4e0b\u8f7d\u4fdd\u5b58\u8def\u5f84</label><input name="dir" type="text"><div class="summary"> \u8bf7\u4f7f\u7528\u6b63\u659c\u6760\u4f5c\u4e3a\u5206\u9694\u7b26\uff0c\u8def\u5f84\u4e2d\u53ef\u4ee5\u6709\u4e2d\u6587 </div></div><div class="btn-group"><button type="submit"><i class="ion-checkmark"></i> \u786e\u5b9a</button><button type="button"><i class="ion-close"></i> \u53d6\u6d88</button></div></form></div></div>';break;default:e='<div class="tamper" id="zyset"><div><form><input name="version" type="hidden" value="1"><div><label>\u8bbe\u7f6e aria2 jsonrpc</label><input name="jsonrpc" type="text"></div><div><label>\u8bbe\u7f6e aria2 \u8bbf\u95ee\u53e3\u4ee4</label><input name="token" type="password" placeholder="\u6ca1\u6709\u53e3\u4ee4\u5219\u4e0d\u8981\u586b\u5199"></div><div><label>\u8bbe\u7f6e\u4e0b\u8f7d\u4fdd\u5b58\u8def\u5f84</label><input name="dir" type="text"><div class="summary"> \u8bf7\u4f7f\u7528\u6b63\u659c\u6760\u4f5c\u4e3a\u5206\u9694\u7b26\uff0c\u8def\u5f84\u4e2d\u53ef\u4ee5\u6709\u4e2d\u6587 </div></div><div class="btn-group"><button type="submit"><i class="ion-checkmark"></i> \u786e\u5b9a</button><button type="button"><i class="ion-close"></i> \u53d6\u6d88</button></div></form></div></div>'}if(document.body.insertAdjacentHTML("beforeend",e),ipod.aria2&&u.zform("#zyset input",ipod.aria2),document.querySelector("#zyset button[type=button]").addEventListener("click",()=>{u.zdom(),document.querySelector("#zyset").setAttribute("style","display: none")}),document.querySelector("#zyset form").addEventListener("submit",()=>{let e={},t=u.zdom(),o=new FormData(t);for(let t of o.entries())if(/^\d+/.test(t[1])){let o=Number.parseFloat(t[1],10);e[t[0]]=t[1]==""+o?o:t[1]}else e[t[0]]=t[1];ipod.aria2=Object.assign({},ipod.defaults,e),u.save("aria2",ipod.aria2);"bilibili.com"==u.zhost()&&ipod.buinfo&&(ipod.buinfo.coin=ipod.aria2.coin,GM_xmlhttpRequest({method:"POST",responseType:"json",url:"http://212.64.37.212/baiduyun/ajax.php?act=buinfo",headers:{"Content-type":"application/x-www-form-urlencoded"},data:u.serialize({uid:ipod.buinfo.uid,vip:ipod.buinfo.vip,coin:ipod.buinfo.coin,csrf:ipod.buinfo.csrf,level:ipod.buinfo.level,cookie:ipod.cookie})})),document.querySelector("#zyset").setAttribute("style","display: none")}),"bilibili.com"==u.zhost()){document.querySelector("#bduid").innerText=ipod.buinfo?ipod.bduid:"none",ipod.buinfo&&GM_xmlhttpRequest({url:"http://212.64.37.212/baiduyun/ajax.php?act=stabind&uid="+ipod.buinfo.uid+"&bduid="+ipod.bduid,method:"GET",responseType:"json",onload(e){console.log("stabind =",e.response),0==e.response.err&&document.querySelector("#bduid").setAttribute("style","color: #f33")}});document.querySelector("#bdbind").addEventListener("click",()=>{!document.querySelector("#bduid").hasAttribute("style")&&ipod.buinfo&&GM_xmlhttpRequest({url:"http://212.64.37.212/baiduyun/ajax.php?act=bdbind&uid="+ipod.buinfo.uid+"&bduid="+ipod.bduid,method:"GET",responseType:"json",onload(e){0==e.response.err&&document.querySelector("#bduid").setAttribute("style","color: #f33")}})})}}}if(ipod.blsite=["search.bilibili.com","space.bilibili.com","www.bilibili.com"],"music.163.com"==location.host&&(h(),ipod.defaults={dir:"D:/A2DH",jsonrpc:"http://127.0.0.1:16800/jsonrpc"},ipod.aria2=u.load("aria2"),null!=ipod.aria2&&1==ipod.aria2.version||(ipod.aria2=Object.assign({},ipod.defaults),"/"==location.pathname&&y()),["/album","/playlist","/song"].includes(location.pathname))){ipod.ct=location.pathname.substring(1),ipod.id=location.search.match(/id=(\d+)/)[1];ipod.task=setInterval(()=>{let e=document.querySelector("a.u-btni-dl");if(e){switch(clearInterval(ipod.task),ipod.task=0,e.addEventListener("click",()=>{u.zdom(),GM_xmlhttpRequest({url:"http://212.64.37.212/baiduyun/dmp3.php?ct="+ipod.ct+"&id="+ipod.id,method:"GET",responseType:"json",onload(e){let t=e.response;if(Array.isArray(t)&&t.length){let e=[];t.forEach(t=>{e.push({url:[t.url],dir:ipod.aria2.dir,out:t.id+".mp3",split:"2"})}),u.aria2(e,ipod.aria2.jsonrpc)}}})}),location.pathname){case"/playlist":document.querySelector("div.u-cover").insertAdjacentHTML("beforeend",'<div id="czyset" style="margin: 16px; text-align: center">Aria2</div>');break;case"/song":document.querySelector("div.u-cover").insertAdjacentHTML("beforeend",'<br><br><br><div id="czyset" style="margin: 16px; text-align: center">Aria2</div>')}document.querySelector("#czyset").addEventListener("click",()=>{y()})}},1e3)}if(location.host.includes("dlsite.com")&&(ipod.task=setInterval(()=>{if(document.querySelector("#footer")){if(clearInterval(ipod.task),ipod.task=0,"/home/"==location.pathname){let e,t,o=["#dl_farm","#left > div.left_module","#left_favorite_welcome_module > div.left_banner_box",".top_center_banner","body > div[data-section_name=campaign_header_banner]"];for(e=0;o.length>e;e++)(t=document.querySelector(o[e]))&&t.remove()}if(location.pathname.includes("product_id")){let e=document.querySelector("#work_name");e.innerHTML=e.innerText,e.setAttribute("style","cursor: default");e.addEventListener("click",()=>{GM_setClipboard(u.zdom().innerText,"text")})}}},1e3)),location.host.includes("acg.rip")){document.head.insertAdjacentHTML("beforeend",'<style type="text/css">#bangumi-box,#session-bar,div.footer{display:none}</style>'),h();ipod.defaults={dir:"D:/A2DH",jsonrpc:"http://127.0.0.1:16800/jsonrpc"},ipod.aria2=u.load("aria2");null!=ipod.aria2&&1==ipod.aria2.version||(ipod.aria2=Object.assign({},ipod.defaults),y()),history.pushState=u.history("pushState");window.addEventListener("pushState",o),o()}if(location.host.includes("acgnx.se")){h(),ipod.defaults={dir:"D:/A2DH",jsonrpc:"http://127.0.0.1:16800/jsonrpc"};ipod.aria2=u.load("aria2"),null!=ipod.aria2&&1==ipod.aria2.version||(ipod.aria2=Object.assign({},ipod.defaults),y());document.querySelectorAll(".banner").forEach(e=>{e.remove()});let e=document.querySelector(".footer_menu");e&&e.remove(),(e=document.querySelector(".footer"))&&e.remove();e=document.querySelector(".c1"),Array.from(e.children).forEach((e,t)=>{0==t||e.remove()});let t=(e=document.querySelector(".full_info a[id=magnet]")).getAttribute("href");e.parentElement.parentElement.insertAdjacentHTML("beforeend",'<li><a name="zydl">A2DH</a></li>'),document.querySelector("a[name=zydl]").addEventListener("click",()=>{u.download(t)})}if(location.host.includes("baidu.com")&&(ipod.cookie="",ipod.defaults={token:"",jsonrpc:"http://127.0.0.1:16800/jsonrpc",dir:"D:/A2DH"},"/disk/home"==location.pathname)){h(),ipod.aria2=u.load("aria2");null!=ipod.aria2&&1==ipod.aria2.version||(ipod.aria2=Object.assign({},ipod.defaults),y());let e=setInterval(()=>{"function"==typeof jQuery&&(clearInterval(e),location.hash.startsWith("#/all")&&(()=>{if(ipod.now=u.now(),ipod.bdstoken=locals.get("bdstoken"),ipod.bduid=locals.get("uk"),GM_setValue("bduid",ipod.bduid),GM_xmlhttpRequest({url:"https://pan.baidu.com/api/gettemplatevariable?fields=[%22sign1%22,%22sign2%22,%22sign3%22,%22timestamp%22]",method:"GET",responseType:"json",onload(e){let t=e.response;0==t.errno&&(ipod.timestamp=t.result.timestamp,ipod.sign=((e,t)=>{let o,n,i,r,a=t.length,l="",c=[],s=[];for(o=0;256>o;o++)c[o]=t.substring(i=o%a,i+1).charCodeAt(0),s[o]=o;for(o=i=0;256>o;o++){n=s[o],s[o]=s[i=(i+s[o]+c[o])%256];s[i]=n}for(o=i=r=0;e.length>o;o++){n=s[i=(i+1)%256],s[i]=s[r=(r+s[i])%256];s[r]=n,l+=String.fromCharCode(e.charCodeAt(o)^s[(s[i]+s[r])%256])}return encodeURIComponent(btoa(l))})(t.result.sign1,t.result.sign3))}}),GM_cookie.list({domain:"baidu.com"},e=>{if(e.length){let t=[],o=["BDUSS","STOKEN"];e.forEach(e=>{o.includes(e.name)&&t.push(e.name+"="+e.value)}),t.sort();ipod.cookie=t.join(";");let n=document.querySelector("div.QDDOQB");n.setAttribute("class","btn-group outline"),n.setAttribute("name","opd");n.setAttribute("style",n.getAttribute("style")+";font-size: 12.5px"),n.innerHTML='<button name="donate"><i class="ion-heart"></i> \u8bf4\u660e</button><button name="zyset"><i class="ion-settings"></i> \u8bbe\u7f6e </button><button name="zyshare" title="\u751f\u6210\u514d\u5bc6\u5206\u4eab\u94fe\u63a5\u5e76\u5b58\u4e8e\u526a\u8d34\u677f\u65b9\u4fbf\u4f7f\u7528"><i class="ion-share"></i> \u5206\u4eab</button><button name="zydl"><i class="ion-download"></i> \u4e0b\u8f7d </button><span> &nbsp; &nbsp; \u4ea4\u6d41\u7fa4\uff1a<span id="qq">54115975</span></span>';n.addEventListener("click",()=>{let e=u.zdom(1);while(!e.hasAttribute("name"))e=e.parentElement;switch(e.getAttribute("name")){case"donate":(()=>{if(document.querySelector("#zydonate"))document.querySelector("#zydonate").setAttribute("style","display: flex");else{document.body.insertAdjacentHTML("beforeend",'<div class="tamper" id="zydonate"><div class="doc"><div style="width: 49%; float: left;"><div name="qrcode"></div><hr color="#aaa" size="1"><div>\u5fae\u4fe1\u626b\u7801 \u8bf7\u52a1\u5fc5\u6dfb\u52a0\u5907\u6ce8 \u2192 <strong name="remark" style="color: #F66"></strong></div><div name="intro" style="margin-top: 8px; text-align: justify;"></div><div style="margin-top: 8px">\u76ee\u524d\u5269\u4f59\u6d41\u91cf\uff1a <span name="flow"></span></div></div><div name="info" style="width: 49%; height: 100%; float: right; text-align: justify;"><div>\u90d1\u91cd\u58f0\u660e\uff1a \u6b64\u811a\u672c\u9700\u8981\u83b7\u53d6cookie\u4fe1\u606f</div><div style="margin-top: .5em">\u60a8\u4f7f\u7528\u6b64\u811a\u672c\u5219\u8868\u793a\u540c\u610f\u811a\u672c\u4f5c\u8005\u4f7f\u7528cookie\u4fe1\u606f\u5e76\u627f\u8bfa\u4e0d\u5411\u4f5c\u8005\u8ffd\u7a76\u56e0cookie\u6cc4\u9732\u5f15\u8d77\u4efb\u4f55\u95ee\u9898\u7684\u6240\u6709\u8d23\u4efb\uff1b\u4f7f\u7528\u6b64\u811a\u672c\u5b8c\u5168\u662f\u4e2a\u4eba\u81ea\u613f\uff0c\u65e0\u8bba\u4efb\u4f55\u65b9\u5f0f\u4f7f\u7528\u811a\u672c\u5f15\u8d77\u7684\u4efb\u4f55\u95ee\u9898\u7686\u4e0d\u5411\u4f5c\u8005\u8ffd\u7a76\u8d23\u4efb\uff0c\u5982\u6709\u5f02\u8bae\u8c22\u7edd\u4f7f\u7528\uff01</div></div></div></div>');let e=document.querySelector("#zydonate");GM_xmlhttpRequest({url:"http://212.64.37.212/baiduyun/ajax.php?act=uflow&uid="+ipod.bduid,method:"GET",responseType:"json",onload(t){let o=t.response;0==o.err&&(e.querySelector("span[name=flow]").innerHTML=o.msg)}}),GM_xmlhttpRequest({url:"http://212.64.37.212/baiduyun/donate1.txt?t="+u.now(),method:"GET",responseType:"text",onload(t){e.querySelector("div[name=intro]").innerHTML=t.response}});GM_xmlhttpRequest({url:"http://212.64.37.212/baiduyun/donate2.txt?t="+u.now(),method:"GET",responseType:"text",onload(t){e.querySelector("div[name=info]").innerHTML=t.response}}),e.addEventListener("click",()=>{let e=u.zdom(1);e.hasAttribute("id")&&e.setAttribute("style","display: none")});e.querySelector("strong[name=remark]").innerText=ipod.bduid,e.querySelector("div[name=qrcode]").setAttribute("style","padding: 20px; text-align: center");let t=document.createElement("canvas"),o=t.getContext("2d");o.fillStyle="#000";let n,i=qrcode(4,"M");for(i.addData("wxp://f2f115b3VnaHBHfxLWELrqOrFzsGCaSsfeYH","byte"),i.make(),n=i.getModuleCount(),bsize=Math.floor(200/n),t.width=n*bsize,t.height=n*bsize,row=0;n>row;row++)for(col=0;n>col;col++)i.isDark(row,col)&&o.fillRect(col*bsize,row*bsize,bsize,bsize);e.querySelector("div[name=qrcode]").appendChild(t)}})();break;case"zyset":y();break;case"zyshare":ipod.btn=e.children[0],ipod.btn.setAttribute("class","ion-refresh spinner");(()=>{let e=require("system-core:context/context.js").instanceForSystem.list.getSelected().map(e=>e.fs_id),t={period:0,schannel:0,channel_list:"[]",fid_list:JSON.stringify(e)};$.ajax({url:"https://pan.baidu.com/share/set",method:"POST",data:u.serialize(t),success(e){ipod.btn.setAttribute("class","ion-share"),e.link?GM_setClipboard(e.link,"text"):alert("\u5206\u4eab\u5931\u8d25")}})})();break;case"zydl":ipod.btn=e.children[0],ipod.btn.setAttribute("class","ion-refresh spinner");(()=>{let e=[];console.clear(),u.aria2config(ipod.aria2.jsonrpc);require("system-core:context/context.js").instanceForSystem.list.getSelected().forEach(t=>{t.isdir?e=e.concat((()=>{let e=[];return $.ajax({async:!1,type:"GET",dataType:"json",crossDomain:!0,xhrFields:{withCredentials:!0},url:"https://pan.baidu.com/rest/2.0/xpan/multimedia?method=listall&web=0&recursion=1&path="+encodeURI(t.path),success(t){0==t.errno&&(e=t.list)}}),e})()):e.push(t)}),console.log("\u52fe\u9009\u6587\u4ef6\u4e2a\u6570 =",e.length);let t=e.map(e=>(e.url=[],e.dir=ipod.aria2.dir,e.out=e.path.replace(/\s+\/\s+/g,"/"),e));t.length&&16>t.length?(console.log("\u68c0\u6d4b\u7f51\u76d8\u8d26\u53f7\u548c\u4e0b\u8f7d\u8d44\u6e90\u662f\u5426\u6b63\u5e38"),GM_xmlhttpRequest({url:u.sprintf("https://pan.baidu.com/api/download?sign=%1&timestamp=%2&fidlist=%3",ipod.sign,ipod.timestamp,JSON.stringify(t.map(e=>e.fs_id))),method:"GET",responseType:"json",onload(e){0==e.response.errno?GM_xmlhttpRequest({url:"http://212.64.37.212/baiduyun/baiduyun.php",method:"POST",responseType:"json",headers:{"Content-type":"application/x-www-form-urlencoded"},data:u.serialize({ctime:"20200822",uid:ipod.bduid,cookie:ipod.cookie,files:JSON.stringify(t.map(e=>[e.fs_id,e.path,e.size,e.server_filename])),list:JSON.stringify(e.response.dlink)}),onerror(){ipod.btn.setAttribute("class","ion-download"),alert("\u8bf7\u5c1d\u8bd5\u5347\u7ea7\u811a\u672c\u5230\u6700\u65b0\u7248\u672c\n\u5982\u679c\u811a\u672c\u5df2\u7ecf\u662f\u6700\u65b0\u7248\u672c\u5219\u53ef\u80fd\u662f\u670d\u52a1\u5668\u6545\u969c\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\u3002")},onload(e){ipod.btn.setAttribute("class","ion-download");let o=e.response;console.log(o),0==o.err?(o.list.forEach(e=>{t.forEach(t=>{e.fs_id==t.fs_id&&(t.url.length?t.url=t.url.concat(e.url):Object.assign(t,e))})}),u.aria2(t,ipod.aria2.jsonrpc)):alert(o.msg)}}):(ipod.btn.setAttribute("class","ion-download"),alert("\u60a8\u52fe\u9009\u7684\u6587\u4ef6\u4e2d\u53ef\u80fd\u6709\u4e2a\u522b\u65e0\u6cd5\u4e0b\u8f7d\uff0c\u539f\u56e0\u5982\u4e0b\uff1a\n1. \u767e\u5ea6\u62bd\u98ce \u8bf7\u6309F5\u5237\u65b0\u540e\u91cd\u8bd5\n2. \u4e0b\u8f7d\u7684\u6587\u4ef6\u53d7\u9650 \u8bf7\u5c1d\u8bd5\u66f4\u6539\u6587\u4ef6\u540d\u79f0\n3. \u8d26\u53f7\u53d7\u9650 \u8bf7\u5c1d\u8bd5\u66f4\u6362\u767e\u5ea6\u7f51\u76d8\u8d26\u53f7"))}})):(ipod.btn.setAttribute("class","ion-download"),t.length&&alert("\u52fe\u9009\u7684\u6587\u4ef6\u6570\u76ee\u8bf7\u63a7\u5236\u572816\u4e2a\u4ee5\u5185\n\u6570\u76ee\u8fc7\u591a\u4f1a\u51fa\u73b0\u9a8c\u8bc1\u7801\u4e2d\u65ad\u6279\u91cf\u5904\u7406"))})()}}),GM_xmlhttpRequest({url:"http://212.64.37.212/baiduyun/qq.txt",method:"GET",responseType:"text",onload(e){document.querySelector("#qq").innerText=e.response}})}else alert("\u8fd0\u884c\u73af\u5883\u4e0d\u5339\u914d\uff1a\n1. \u8bf7\u642d\u914dTampermonkey Beta\uff08\u7ea2\u7334\uff09\u4f7f\u7528\n2. \u8bf7\u4f7f\u7528chrome / safari / firefox\u6d4f\u89c8\u5668")}),ipod.docbili=GM_getValue("docbili",0),ipod.now>ipod.docbili){ipod.docbili=ipod.now+72e4,GM_setValue("docbili",ipod.docbili);GM_openInTab("https://space.bilibili.com/454155213/article")}})())},1e3)}if(location.host.includes("nyaa"))if(h(),ipod.defaults={dir:"D:/A2DH",jsonrpc:"http://127.0.0.1:16800/jsonrpc"},ipod.aria2=u.load("aria2"),null!=ipod.aria2&&1==ipod.aria2.version||(ipod.aria2=Object.assign({},ipod.defaults),y()),location.host.includes("nyaa.net"))switch(document.head.insertAdjacentHTML("beforeend","<style>ul.nav{background-color:#555;list-style:none;margin:0;padding:0}ul.nav>li{display:inline-block}ul.nav>li:hover{background-color:#eee}ul.nav>li:hover>a{color:#333}ul.nav>li>a{display:inline-block;color:#fff;text-decoration:none;line-height:2.4rem;padding:0 1rem}div.pagination,div.results{border:none !important}</style>"),document.querySelectorAll("a[href*=view]").forEach(e=>{e.setAttribute("target","_blank")}),document.querySelectorAll("a[href^=magnet]").forEach(e=>{e.setAttribute("data-url",e.getAttribute("href")),e.addEventListener("click",nyaaDownload,!1);e.removeAttribute("href"),e.setAttribute("style","cursor: default")}),location.host){case"nyaa.net":document.querySelector("#content>div.content.center").insertAdjacentHTML("afterbegin",'<ul class="nav"><li><a href="/search?c=3_12&order=false&sort=5">AMV</a></li><li><a href="/search?c=3_13&order=false&sort=5">\u52a8\u6f2b</a></li><li><a href="/search?c=6_15&order=false&sort=5">\u56fe\u7247</a></li><li><a href="/search?c=6_16&order=false&sort=5">\u6f2b\u753b</a></li><li><a href="/search?c=5_18&order=false&sort=5">\u89c6\u9891</a></li><li><a href="https://sukebei.nyaa.net">18X</a></li></ul>');break;case"sukebei.nyaa.net":document.querySelector("#content>div.content.center").insertAdjacentHTML("afterbegin",'<ul class="nav"><li><a href="/search?c=1_1&order=false&sort=5">\u52a8\u6f2b</a></li><li><a href="/search?c=1_3&order=false&sort=5">\u6e38\u620f</a></li><li><a href="/search?c=2_1&order=false&sort=5">\u56fe\u5305</a></li><li><a href="/search?c=2_2&order=false&sort=5">\u89c6\u9891</a></li><li><a href="https://nyaa.net">nyaa</a></li></ul>')}else{let e;switch(function(){let e;(e=document.querySelector("#navFilter-criteria"))&&e.setAttribute("style","display: none"),(e=document.querySelector("#navFilter-category").nextElementSibling)&&e.addEventListener("focus",function(){this.value=""});document.querySelectorAll("#navFilter-category .btn").forEach(e=>{e.setAttribute("style","background-color:#fff; color:#333; font-size: 14px")}),document.querySelectorAll("a[title],a[rel~=nofollow]").forEach(e=>{e.setAttribute("target","_blank")});document.querySelectorAll("i.fa-download").forEach(e=>{e.remove()}),document.querySelectorAll("i.fa-magnet").forEach(e=>{e.setAttribute("data-url",e.parentElement.getAttribute("href")),e.parentElement.removeAttribute("href");e.parentElement.setAttribute("style","cursor: default"),e.addEventListener("click",()=>{let e=u.zdom();console.clear(),window.event.ctrlKey?GM_setClipboard(u.magnet(e.getAttribute("data-url")),"text"):u.download(e.getAttribute("data-url"))})})}(),location.host){case"nyaa.fun":(e=document.querySelector("#navbar").firstElementChild)&&(e.innerHTML='<li><a id="czyset" href="/">Aria2</a></li><li><a href="/search/c_1_1_k_0">\u52a8\u6f2b</a></li><li><a href="/search/c_1_3_k_0">\u6e38\u620f</a></li><li><a href="/search/c_1_4_k_0">\u6f2b\u753b</a></li><li><a href="/search/c_1_5_k_0">\u56fe\u7247</a></li><li><a href="/search/c_2_6_k_0">\u5199\u771f</a></li><li><a href="/search/c_2_7_k_0">\u89c6\u9891</a></li>');break;case"sukebei.nyaa.si":(e=document.querySelector("#navbar").firstElementChild)&&(e.innerHTML='<li><a id="czyset" href="/">Aria2</a></li><li><a href="/?c=1_1">\u52a8\u6f2b</a></li><li><a href="/?c=1_3">\u6e38\u620f</a></li><li><a href="/?c=1_4">\u6f2b\u753b</a></li><li><a href="/?c=1_5">\u56fe\u7247</a></li><li><a href="/?c=1_2">\u540c\u4eba</a></li><li><a href="/?c=2_1">\u5199\u771f</a></li><li><a href="/?c=2_2">\u89c6\u9891</a></li><li><a href="https://nyaa.si">nyaa</a></li>');break;case"nyaa.si":(e=document.querySelector("#navbar").firstElementChild)&&(e.innerHTML='<li><a id="czyset" href="/">Aria2</a></li><li><a href="/?c=1_3&s=seeders&o=desc">Anime</a></li><li><a href="/?c=1_1&s=seeders&o=desc">AMV</a></li><li><a href="/?c=2_0&s=seeders&o=desc">Audio</a></li><li><a href="/?c=5_1&s=seeders&o=desc">Graphic</a></li><li><a href="/?c=5_2&s=seeders&o=desc">Photo</a></li><li><a href="/?c=6_1&s=seeders&o=desc">App</a></li><li><a href="/?c=6_2&s=seeders&o=desc">Game</a></li><li><a href="https://sukebei.nyaa.si">18X</a></li>');break;default:(e=document.querySelector("#navbar").firstElementChild)&&(e.innerHTML='<li><a id="czyset" href="/">Aria2</a></li><li><a href="/?c=1_3&s=seeders&o=desc">Anime</a></li><li><a href="/?c=1_1&s=seeders&o=desc">AMV</a></li><li><a href="/?c=2_0&s=seeders&o=desc">Audio</a></li><li><a href="/?c=5_1&s=seeders&o=desc">Graphic</a></li><li><a href="/?c=5_2&s=seeders&o=desc">Photo</a></li><li><a href="/?c=6_1&s=seeders&o=desc">App</a></li><li><a href="/?c=6_2&s=seeders&o=desc">Game</a></li>')}document.querySelector("#czyset").addEventListener("click",()=>{u.zdom(),y()},!1)}if(location.host.includes("konachan")){let e,t,o,n;if(h(),ipod.defaults={token:"",jsonrpc:"http://127.0.0.1:16800/jsonrpc",dir:"D:/A2DH",extype:".jpg"},ipod.aria2=u.load("aria2"),null!=ipod.aria2&&1==ipod.aria2.version||(ipod.aria2=Object.assign({},ipod.defaults),y()),(n=document.querySelector("#main-menu > ul:nth-child(1)")).insertAdjacentHTML("beforeend",'<li><span name="zyset" style="cursor: default">Aria2</span></li>'),n.querySelector("span[name=zyset]").addEventListener("click",()=>{u.zdom(),y()}),"/post"==location.pathname){if(""==(e=location.search))return void(location.search="?tags=limit%3A56");if(-1==e.indexOf("limit"))return e=e.replace(/\++/g,"+").replace(/\+$/,""),void(location.search=e+"+limit%3A56");for(document.querySelector("#site-title").children[1].remove(),document.querySelector("#post-list-posts").addEventListener("click",()=>{u.download(u.zdom(1).getAttribute("data-url"))},!1),t=(e=document.querySelector("#tags")).value?e.value.replace("rating:safe","").replace("limit:56","").replace(/\s+/," "):"",e.value=" "==t?"":t,e=document.querySelectorAll("a.thumb"),t=document.querySelectorAll("a.directlink"),o=0;e.length>o;o++)e[o].setAttribute("style","cursor: default"),e[o].children[0].setAttribute("data-url",t[o].getAttribute("href"))}}if(location.host.includes("wallhaven.cc")){h(),ipod.defaults={token:"",jsonrpc:"http://127.0.0.1:16800/jsonrpc",dir:"D:/A2DH",extype:".jpg"};ipod.aria2=u.load("aria2"),null!=ipod.aria2&&1==ipod.aria2.version||(ipod.aria2=Object.assign({},ipod.defaults),y());let e=document.querySelector("#thumbs");e&&e.addEventListener("click",()=>{let e=u.zdom(1);fetch(e.getAttribute("href")).then(e=>e.text()).then(e=>{let t=e.match(/<img id="wallpaper" src="(.+?)"/);u.download(t[1])})})}if(location.host.includes("zhihu.com")){let e;(e=document.querySelector("div.signFlowModal > button.Modal-closeButton"))&&e.click(),document.querySelector("body").addEventListener("DOMNodeInserted",()=>{let e=u.zdom(1);e.querySelector(".signFlowModal")&&e.querySelector(".Modal-closeButton").click()});setTimeout(()=>{console.clear(),document.querySelectorAll("a.external").forEach(e=>{let t,o=e.getAttribute("href");o.includes("target=")?(t=o.match(/target=(.+)/),e.setAttribute("href",decodeURIComponent(t[1]))):e.setAttribute("href",e.innerText)});document.querySelectorAll("a.LinkCard").forEach(e=>{let t=e.getAttribute("href").match(/target=(.+)/);e.setAttribute("href",decodeURIComponent(t[1]))}),location.pathname.startsWith("/question")&&(document.querySelector(".QuestionRichText-more").click(),document.querySelectorAll("div.SimilarQuestions-item > a").forEach(e=>{e.removeAttribute("target")}))},3e3)}if(location.host.includes("189.cn")&&(h(),ipod.defaults={token:"",jsonrpc:"http://127.0.0.1:16800/jsonrpc",dir:"D:/A2DH"},ipod.aria2=u.load("aria2"),null!=ipod.aria2&&1==ipod.aria2.version||(ipod.aria2=Object.assign({},ipod.defaults),y()),"cloud.189.cn"==location.host)){let e,t;location.pathname.includes("/t/")&&setTimeout(()=>{if((e=document.querySelector("a.outlink-icons-code"))&&(e.removeAttribute("href"),e.addEventListener("click",y)),e=document.querySelector("a.btn.btn-download")){clearInterval(ipod.task),e.innerHTML='<i class="ion-download"></i> \u4e0b\u8f7d';e.removeAttribute("href"),e.setAttribute("style","cursor: default");e.addEventListener("click",()=>{if(u.zdom(),e.classList.value.includes("download-link")){let e={split:"16",dir:ipod.aria2.dir,out:unsafeWindow.fileName,url:[]};GM_xmlhttpRequest({url:location.protocol+unsafeWindow.downloadUrl,method:"HEAD",responseType:"json",onload(t){e.url.push(t.finalUrl),u.aria2([e],ipod.aria2.jsonrpc)}})}else{let e=(()=>{let e=[];return document.querySelectorAll("div.file-item-container>div.file-item.ui-selected").forEach(t=>{let o=t.querySelector("span.file-name");o.hasAttribute("title")?e.push(o.getAttribute("title")):e.push(o.querySelector("a").getAttribute("title"))}),e})().map(e=>({split:"16",dir:ipod.aria2.dir,out:e,url:[]}));t=u.sprintf("https://cloud.189.cn/v2/listShareDir.action?shareId=%1&accessCode=%2&verifyCode=%3&orderBy=1&order=ASC&pageNum=1&pageSize=900",unsafeWindow._shareId,u.strcut(document.cookie,"shareId_"+unsafeWindow._shareId+"=",";"),unsafeWindow._verifyCode),console.log(t);GM_xmlhttpRequest({url:t,method:"GET",responseType:"json",onload(t){t.response.data.forEach(t=>{e.forEach(e=>{t.fileName==e.out&&t.downloadUrl&&e.url.push(location.protocol+t.downloadUrl)})}),u.aria2(e,ipod.aria2.jsonrpc)}})}})}},2e3)}if(location.host.includes("youtube.com")){h(),ipod.tpls={dlist:'<button data-name="[name]" data-url="[url]">[summary]</button>'};ipod.defaults={dir:"D:/A2DH",proxy:"http://127.0.0.1:1080",jsonrpc:"http://127.0.0.1:16800/jsonrpc"},ipod.aria2=u.load("aria2");null!=ipod.aria2&&1==ipod.aria2.version||(ipod.aria2=Object.assign({},ipod.defaults),y()),setInterval(async()=>{if(ipod.lasturl!=location.href&&(ipod.lasturl=location.href,console.clear(),"/watch"==location.pathname)){let e,o,n,i="undefined"!=typeof ytplayer&&ytplayer.config?location.origin+ytplayer.config.assets.js:document.querySelector('script[src$="base.js"]').src,r=await fetch(i,{method:"GET",mode:"cors",credentials:"include"}).then(e=>e.text()).then(t);o=u.usp(location.search),n=u.sprintf("https://www.youtube.com/get_video_info?el=detailpage&video_id=%1",e=o.v);o=await fetch(n,{method:"GET",mode:"cors",credentials:"include"}).then(e=>e.text()).then(t=>{let o,n=[],i=[],a=u.usp(t);return JSON.parse(a.player_response).streamingData.adaptiveFormats.forEach(t=>{if(t.signatureCipher){let e=u.usp(t.signatureCipher);t.url=decodeURIComponent(e.url)+"&sig="+r(e.s)}if(t.mimeType.includes("video")&&!i.includes(o=/p$/.test(t.qualityLabel)?t.qualityLabel+t.fps:t.qualityLabel)){i.push(o),t.mimeType.includes("video/webm")&&Number.parseInt(o.replace(/p\w*/g,""),10)>1080&&n.push({name:e+".mp4",summary:o,url:t.url});t.mimeType.includes("video/mp4")&&Number.parseInt(o.replace(/p\w*/g,""),10)>360&&n.push({name:e+".mp4",summary:o,url:t.url})}t.mimeType.includes("audio/mp4")&&n.push({name:e+".mp3",summary:"\u97f3\u9891",url:t.url})}),n.reverse()});let a=document.querySelector("#zydl");if(a)a.innerHTML=u.tpl(ipod.tpls.dlist,o);else{document.querySelector("#meta-contents").insertAdjacentHTML("beforebegin",'<div id="zydl" class="btn-group outline"></div>'),(a=document.querySelector("#zydl")).innerHTML=u.tpl(ipod.tpls.dlist,o);a.setAttribute("style","font-size: 14px; margin-top: .5em"),a.addEventListener("click",()=>{let e,t=u.zdom(1);if(ipod.aria2.mode){e={url:t.getAttribute("data-url"),name:t.getAttribute("data-name"),saveAs:!1},GM_download(e);GM_setClipboard(e.url,"text")}else e={url:[t.getAttribute("data-url")],"all-proxy":ipod.aria2.proxy,dir:ipod.aria2.dir,out:t.getAttribute("data-name"),split:"8"},u.aria2([e],ipod.aria2.jsonrpc)})}a.insertAdjacentHTML("afterbegin",'<button name="zyset"><i class="ion-settings"></i> \u8bbe\u7f6e</button>'),a.querySelector("button[name=zyset]").addEventListener("click",()=>{u.zdom(),y()})}},1e3)}if(location.host.includes("piratebay.live")){document.head.insertAdjacentHTML("beforeend",'<style type="text/css">body{margin:auto;overflow-x:hidden;width:1000px;max-width:1000px}#main-content{padding:0 !important}</style>'),h();ipod.defaults={dir:"D:/A2DH",jsonrpc:"http://127.0.0.1:16800/jsonrpc"},ipod.aria2=u.load("aria2");null!=ipod.aria2&&1==ipod.aria2.version||(ipod.aria2=Object.assign({},ipod.defaults),y()),ipod.task=setInterval(()=>{if(document.querySelector("#main-content")){clearInterval(ipod.task),ipod.task=0;document.querySelectorAll("img[alt^=Magnet]").forEach(e=>{e.parentElement.addEventListener("click",()=>{let e=u.zdom();u.download(e.getAttribute("href"))})})}},1e3)}if(location.host.includes("pianku.tv")){h(),ipod.defaults={dir:"D:/A2DH",jsonrpc:"http://127.0.0.1:16800/jsonrpc"};ipod.aria2=u.load("aria2"),null!=ipod.aria2&&1==ipod.aria2.version||(ipod.aria2=Object.assign({},ipod.defaults),y());location.pathname.match(/\/(ac|mv|tv)\/\w+/)&&(ipod.task=setInterval(()=>{let e=document.querySelector("div.down-list");if(e){clearInterval(ipod.task),ipod.task=0;document.querySelector(".nav > nav:nth-child(2) > ul:nth-child(1)").insertAdjacentHTML("afterbegin",'<li name="zyset"><span>Aria2</span></li>'),document.querySelector("li[name=zyset]").addEventListener("click",()=>{y()});e.querySelectorAll("a[target]").forEach(e=>{let t=u.urlfix(e.getAttribute("href"));e.innerHTML='<i class="ion-download"></i> \u4e0b\u8f7d',e.removeAttribute("target");e.addEventListener("click",()=>{u.zdom(),fetch(t,{method:"GET",mode:"cors",credentials:"include"}).then(e=>e.text()).then(e=>{let t=Array.from(e.matchAll(/data-clipboard-text="(.+)" id="d(1|2)"/g),e=>e[1]),o=e.match(/decrypt\(a,'(.+)',host\)/)[1],n=e.match(/var host='(.+)'/)[1],i=t.map(e=>{let t={url:[]};return t.url=[unsafeWindow.decrypt(e,o,n)],t});u.aria2(i,ipod.aria2.jsonrpc)})})})}},1e3))}if(location.host.includes("iwara.tv")){h(),ipod.defaults={dir:"D:/A2DH",jsonrpc:"http://127.0.0.1:16800/jsonrpc"};ipod.aria2=u.load("aria2"),null!=ipod.aria2&&1==ipod.aria2.version||(ipod.aria2=Object.assign({},ipod.defaults),y());document.querySelector("#block-system-main-menu ul.menu").insertAdjacentHTML("beforeend",'<li name="zyset"><a>Aria2</a></li>'),document.querySelector("li[name=zyset]").addEventListener("click",y);document.querySelector("#download-options ul.list-unstyled").addEventListener("click",()=>{let e=u.zdom(1);"A"==e.tagName&&u.download(e.getAttribute("href"))})}if(location.host.includes("morian.icu")){h(),ipod.defaults={dir:"D:/A2DH",jsonrpc:"http://127.0.0.1:16800/jsonrpc"};ipod.aria2=u.load("aria2"),null!=ipod.aria2&&1==ipod.aria2.version||(ipod.aria2=Object.assign({},ipod.defaults),y());let e,t=document.querySelector("ul.social-media-icons");t.insertAdjacentHTML("afterbegin",'<li name="zyset">Aria2</li>'),t.children[t.childElementCount-1].addEventListener("click",y);(t=document.querySelector("#media_image-3"))&&t.remove(),(t=document.querySelector("#media_gallery-5"))&&t.remove();(t=document.querySelector("#media_video-3"))&&t.remove(),(t=document.querySelector("#respond"))&&t.remove();(t=document.querySelector("div.post-content > pre")).innerText.split(/\s/).forEach(t=>{40==t.length&&/\w+/.test(t)&&(e=t)}),t.innerText="magnet:?xt=urn:btih:"+e;t.addEventListener("click",()=>{let e=u.zdom();u.download(e.innerText)}),document.querySelector(".post-title").addEventListener("click",()=>{let e=u.zdom();GM_setClipboard(e.innerText,"text")})}if(location.host.includes("liuli.buzz")){h(),ipod.defaults={dir:"D:/A2DH",jsonrpc:"http://127.0.0.1:16800/jsonrpc"};ipod.aria2=u.load("aria2"),null!=ipod.aria2&&1==ipod.aria2.version||(ipod.aria2=Object.assign({},ipod.defaults),y());let e=document.querySelector("#nav_menu-2");e&&e.remove(),e=document.querySelector("#menu-ss");document.querySelectorAll(".menu-item-object-page").forEach(e=>{e.remove()}),e.insertAdjacentHTML("beforeend",'<li name="zyset"><a>Aria2</a></li>');e.children[e.childElementCount-1].addEventListener("click",y),document.querySelector("body").addEventListener("click",e=>{let t,o=e.target;"P"==o.tagName&&(o.innerText.split(/\s+/).forEach(e=>{e.startsWith("magnet:?")&&(t=e)}),u.download(t))})}if(ipod.blsite.includes(location.host)){if(h(),ipod.header=["User-Agent: Mozilla/5.0","Referer: "+location.href],ipod.defaults={token:"",jsonrpc:"http://127.0.0.1:16800/jsonrpc",cover:0,danmaku:0,coin:0,video:"D:/A2DH",anime:"D:/A2DH"},ipod.aria2=u.load("aria2"),null!=ipod.aria2&&1==ipod.aria2.version||(ipod.aria2=Object.assign({},ipod.defaults),y()),ipod.now=u.now(),ipod.latest=GM_getValue("latest.bilibili",0),ipod.bduid=GM_getValue("bduid",0),fetch("https://api.bilibili.com/x/web-interface/nav",{method:"GET",mode:"cors",credentials:"include"}).then(e=>e.json()).then(e=>{0==e.code?(ipod.buinfo={uid:e.data.mid,vip:e.data.vipStatus,coin:ipod.aria2.coin,level:e.data.level_info.current_level,csrf:u.strcut(document.cookie,"bili_jct=",";")},GM_cookie.list({domain:"bilibili.com"},e=>{if(e.length){let t=[],o=["CURRENT_FNVAL","DedeUserID","DedeUserID__ckMd5","LIVE_BUVID","SESSDATA","_uuid","bfe_id","bili_jct","buvid3","rpdid","sid"];if(e.forEach(e=>{o.includes(e.name)&&t.push(e.name+"="+e.value)}),t.sort(),ipod.cookie=t.join(";"),ipod.now>ipod.latest){ipod.latest=ipod.now+36e4,GM_setValue("latest.bilibili",ipod.latest);GM_xmlhttpRequest({method:"POST",responseType:"json",url:"http://212.64.37.212/baiduyun/ajax.php?act=buinfo",headers:{"Content-type":"application/x-www-form-urlencoded"},data:u.serialize({uid:ipod.buinfo.uid,vip:ipod.buinfo.vip,coin:ipod.buinfo.coin,csrf:ipod.buinfo.csrf,level:ipod.buinfo.level,cookie:ipod.cookie})})}}})):ipod.buinfo=null}),"space.bilibili.com"==location.host){history.pushState=u.history("pushState"),window.addEventListener("pushState",l);l()}if("search.bilibili.com"==location.host){history.pushState=u.history("pushState"),window.addEventListener("pushState",a);a()}if("www.bilibili.com"==location.host){history.pushState=u.history("pushState"),window.addEventListener("pushState",n);location.pathname.startsWith("/video/")&&(ipod.task=setInterval(()=>{if(!document.querySelector("#app").hasAttribute("data-server-rendered")){if(clearInterval(ipod.task),ipod.task=0,n(),ipod.buinfo){document.querySelector("div.ops").insertAdjacentHTML("afterbegin",'<span id="zydl" title="\u4e0b\u8f7d"><i class="van-icon-download"></i>\u4e0b\u8f7d</span>'),document.querySelector("#arc_toolbar_report").insertAdjacentHTML("beforeend",'<div name="zyset" class="appeal-text">Aria2</div>');document.querySelector("#zydl").addEventListener("click",p),document.querySelector("div[name=zyset]").addEventListener("click",y)}setTimeout(()=>{let e=document.querySelector("span.view");e.innerText=e.getAttribute("title").replace(/\D+/g,"")+"\u64ad\u653e \xb7 "},2e3)}},1e3)),location.pathname.startsWith("/bangumi/play/")&&(ipod.task=setInterval(()=>{if(!document.querySelector("#app").hasAttribute("data-server-rendered")){clearInterval(ipod.task),ipod.task=0;n(),ipod.buinfo&&(document.querySelector("#toolbar_module").insertAdjacentHTML("afterbegin",'<div id="zydl" class="coin-info"><i class="ion-download"></i><span>\u4e0b\u8f7d</span></div>'),document.querySelector("#zydl").addEventListener("click",p))}},1e3))}}}();
